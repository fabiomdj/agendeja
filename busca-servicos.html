<script type="text/javascript">
    var gk_fileData = {};
    function loadFileData(filename) {
      return gk_fileData[filename] || "";
    }
    </script><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgendeJá - Busca de Serviços</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAh6qRi1i_i4hWePBgW-Zo9rAx4X417Nt0&callback=initMap" async defer></script>
    <style>
        #map {
            height: 16rem; /* 64 in Tailwind units */
            width: 100%;
            border-radius: 0.5rem;
        }
        @media (min-width: 768px) {
            #map {
                height: 24rem; /* 96 in Tailwind units */
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 p-6">
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold mb-4">Buscar Serviços</h2>
            <select class="w-full p-3 border rounded mb-4">
                <option>Beleza</option>
                <option>Saúde</option>
                <option>Reparos</option>
            </select>
            <input type="range" min="1" max="50" value="10" class="w-full mb-4" id="raio">
            <p class="text-sm text-gray-600">Raio: <span id="raio-valor">10</span> km</p>
            <div id="map"></div>
        </div>
        <div class="space-y-4">
            <div class="bg-white p-4 rounded-lg shadow">
                <h3 class="font-bold">Salão Beleza Total</h3>
                <p class="text-sm text-gray-600">2 km de distância</p>
                <p>Serviços: Corte, Manicure, Tintura</p>
                <button class="mt-2 bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Ver Serviços</button>
            </div>
        </div>
    </div>

    <script>
        let map;

        function initMap() {
            // Coordenadas padrão (caso geolocalização falhe)
            const defaultLocation = { lat: -23.5505, lng: -46.6333 }; // São Paulo, SP

            // Inicializa o mapa
            map = new google.maps.Map(document.getElementById("map"), {
                center: defaultLocation,
                zoom: 12,
            });

            // Tenta obter a localização do usuário
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        };

                        // Centraliza o mapa na localização do usuário
                        map.setCenter(userLocation);

                        // Adiciona um marcador para o usuário
                        new google.maps.Marker({
                            position: userLocation,
                            map: map,
                            title: "Sua Localização",
                            icon: {
                                url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
                            },
                        });

                        // Adiciona um marcador de exemplo para uma empresa fictícia
                        new google.maps.Marker({
                            position: { lat: userLocation.lat + 0.02, lng: userLocation.lng + 0.01 },
                            map: map,
                            title: "Salão Beleza Total",
                        });
                    },
                    () => {
                        // Caso a geolocalização falhe, usa a localização padrão
                        alert("Não foi possível obter sua localização. Usando localização padrão.");
                    }
                );
            } else {
                alert("Seu navegador não suporta geolocalização.");
            }
        }

        // Atualiza o valor do raio em tempo real
        document.getElementById("raio").addEventListener("input", function () {
            document.getElementById("raio-valor").textContent = this.value;
        });
    </script>
</body>
</html>